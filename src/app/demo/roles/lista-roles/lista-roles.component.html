<div class="row">
  <div class="col-sm-12">
    <app-card *ngIf="this.Roles.length>0" cardTitle="Listado de Roles" [options]="false">
      <button type="button" (click)="showCrearRol()" class="btn btn-success">+ Rol</button>
      <ng-select 
            class="mt-1" (change)="construirCabecera()" 
            [items]="Modulos" [multiple]="true" [closeOnSelect]="false"
            [searchable]="true" bindLabel="Nombre" placeholder="Selec. uno o varios módulos"
            [(ngModel)]="ModulosSeleccionados">
      </ng-select>
     
      <div class="row">
        <ag-grid-angular 
        *ngIf="cargando==false" 
        class="ag-theme-alpine mt-1" 
       
        [gridOptions]="gridOptions"
        style="width: 100%; height: 600px;"
          [rowData]="RowData" [columnDefs]="CabeceraAtributos"
          >
        </ag-grid-angular>


        <div *ngIf="this.ItemsModulosAtributos.length>0" class="col-12 col-md-2 col-lg-2">
          <div class="row">
            <div class="col-12 col-md-12 col-lg-12">
              <button type="button" (click)="actualizarRol()" [ngClass]="ConfigInicial == false ? 'saveButton btn btn-success float-end m-1' 
              : 'saveButtonConfig btn btn-success float-end m-1'">Guardar</button>
            </div>
            <div class="col-12 col-md-12 col-lg-12 mt-3">
              <div style="margin-left:130px;">
                <p-inputSwitch (onChange)="selectAll()" inputId="input-metakey" [(ngModel)]="metaKeySelection" />
              </div>
              <div style="margin-left:110px;">
                <label style="font-size: 12px;" class="text-center" for="input-metakey">Seleccionar todo</label>
              </div>

            </div>
            <div class="col-12 col-md-12 col-lg-12 mt-3">
              <button type="button " (click)="expandAll()" class="btn btn-primary float-end ">Expandir <i
                  class="bi bi-plus"></i></button>
            </div>

            <div class="col-12 col-md-12 col-lg-12">
              <button type="button" (click)="collapseAll()" class="btn btn-primary float-end mt-1 ">Contraer <i
                  class="bi bi-dash"></i></button>
            </div>

          </div>
        </div>


      </div>

    </app-card>
  </div>
</div>

<p-dialog header="Creación de roles" [modal]="true" [(visible)]="visibleCrearRol"
   [style]="{ width: '40rem' }"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [maximizable]="true">
  <div class="form-floating mb-3">
  <input type="text" 
  [formControl]="NombreRol"
  class="form-control"
   id="floatingInput" placeholder="name@example.com">
  <label for="floatingInput">Escriba un nombre del rol</label>
</div>
<div class="form-check">
  <input
  [(ngModel)]="isAdmin"
  name="isAdmin"
  class="form-check-input" type="checkbox" value="" id="checkDefault">
  <label class="form-check-label" for="checkDefault">
    Establecer como admin
  </label>
</div>
<button 
(click)="guardarRol()"
type="button" class="btn btn-success">Guardar</button>
</p-dialog>