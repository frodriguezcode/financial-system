
    <app-card cardTitle="Flujo Consolidado"  [options]="false">
      <p-multiSelect class="m-1" (onChange)="filterMeses()" [options]="MesesTodos" [(ngModel)]="MesesSeleccionados" display="chip" placeholder="Seleccione el(los) mes(es)" optionLabel="Mes"></p-multiSelect>
      <p-multiSelect class="m-1" (onChange)="buscarPorCuentaBanco()"  [options]="CuentasBanco" [(ngModel)]="CuentasBancoSelect" display="chip" placeholder="Seleccione una cuenta de banco" optionLabel="Cuenta"></p-multiSelect>
      <p-multiSelect class="m-1" (onChange)="buscarPorUsuario()"  [options]="Usuarios" [(ngModel)]="UsuariosSelect" display="chip" placeholder="Seleccione un usuario" optionLabel="Nombres"></p-multiSelect>
      <div class="table-responsive mt-3">
        <table *ngIf="!Cargando" class="table">
          <thead style="background-color: rgb(113,189,158,255); color:white">
          
              <th >Concepto</th> 
              <ng-container *ngFor="let anio of AniosRegistros">      
                <ng-container *ngFor="let mes of MesesRegistros" >
                  <ng-container *ngFor="let semana of this.getSemanasByMonth(mes.NumMes,anio.Anio)">
                    <th class="text-center">{{"Semana " + semana.Semana + " " + mes.Mes}}</th>
                  </ng-container>     
                  <th class="text-center">{{"Total " + mes.Mes}}</th>
                  
                  
                </ng-container>
                <th class="text-center">{{"Total " + anio.Anio}}</th>
              </ng-container>
        
          </thead>
          <tbody>
            <tr>
              <td>Saldo Inicial</td>
              <ng-container *ngFor="let anio of AniosRegistros">      
                <ng-container *ngFor="let mes of MesesRegistros" >
                  <ng-container *ngFor="let semana of this.getSemanasByMonth(mes.NumMes,anio.Anio)">
                    <td class="text-center">0</td>
                  </ng-container>     
                  <th class="text-center">0</th>
                </ng-container>
                <th class="text-center">0</th>
              </ng-container>
            </tr>
            <ng-container *ngFor="let categoria of Categorias; let j = index">
              <tr>
                
                <td>{{ categoria.Nombre }}</td>
                <ng-container *ngFor="let anio of AniosRegistros">      
                  <ng-container *ngFor="let mes of MesesRegistros" >
                    <ng-container *ngFor="let semana of this.getSemanasByMonth(mes.NumMes,anio.Anio)">
                      <td class="text-center"
                      [ngClass]="{'text-center': true, 'negativo': this.getDataCategoria(semana.Semana,categoria.id,mes.NumMes,anio.Anio) < 0}"
                      >{{"$" + " " +this.getDataCategoria(semana.Semana,categoria.id,mes.NumMes,anio.Anio)}}</td>
                    </ng-container>     
                    <td class="text-center"
                    [ngClass]="{'text-center': true, 'negativo': this.getDataMensualCategoria(categoria.id,mes.NumMes,anio.Anio) < 0}"
                    >{{"$" + " " +this.getDataMensualCategoria(categoria.id,mes.NumMes,anio.Anio)}}</td>
                    
                  </ng-container>
                  <td class="text-center"
                  [ngClass]="{'text-center': true, 'negativo': this.getDataAnualCategoria(categoria.id,anio.Anio) < 0}"
                  >{{"$" + " " +this.getDataAnualCategoria(categoria.id,anio.Anio)}}</td>
        
                </ng-container>
              </tr>
              <ng-container *ngFor="let item of getItems(categoria.id)">
                <tr style="background-color: #FAFAFA">
                  <td><span style="margin-left: 20px; font-weight: bolder;">{{ item.Nombre }}</span></td>
                  <ng-container *ngFor="let anio of AniosRegistros">      
                    <ng-container *ngFor="let mes of MesesRegistros" >
                      <ng-container *ngFor="let semana of this.getSemanasByMonth(mes.NumMes,anio.Anio)">
                        <td style="font-weight: bolder;"  [ngClass]="{'text-center': true, 'negativo': this.getDataItem(semana.Semana,item.Nombre,mes.NumMes,anio.Anio) < 0}">
                          {{ "$ " + this.getDataItem(semana.Semana,item.Nombre,mes.NumMes,anio.Anio) }}
                        </td>
                        </ng-container>     
                      <td style="font-weight: bolder;" 
                      class="text-center"
                      [ngClass]="{'text-center': true, 'negativo': this.getDataMensualItem(item.Nombre,mes.NumMes,anio.Anio) < 0}"
                      >
                      {{"$" + " " +this.getDataMensualItem(item.Nombre,mes.NumMes,anio.Anio)}}</td>
                    </ng-container>
                    <td style="font-weight: bolder;" 
                    class="text-center"
                    [ngClass]="{'text-center': true, 'negativo': this.getDataAnualItem(item.Nombre,anio.Anio)< 0}"
                    >
                    {{"$" + " " +this.getDataAnualItem(item.Nombre,anio.Anio)}}</td>
             
                  </ng-container>
                </tr>
              </ng-container>
            </ng-container>
            <tr>
              <td>Saldo Final en bancos</td>
              <ng-container *ngFor="let anio of AniosRegistros">      
                <ng-container *ngFor="let mes of MesesRegistros" >
                  <ng-container *ngFor="let semana of this.getSemanasByMonth(mes.NumMes,anio.Anio)">
                    <td class="text-center">0</td>
                  </ng-container>     
                  <th class="text-center">0</th>
                </ng-container>
                <th class="text-center">0</th>
              </ng-container>
            </tr>
            <tr>
              <td>Flujo libre neto</td>
              <ng-container *ngFor="let anio of AniosRegistros">      
                <ng-container *ngFor="let mes of MesesRegistros" >
                  <ng-container *ngFor="let semana of this.getSemanasByMonth(mes.NumMes,anio.Anio)">
                    <td class="text-center">0</td>
                  </ng-container>     
                  <th class="text-center">0</th>
                </ng-container>
                <th class="text-center">0</th>
              </ng-container>
            </tr>
          </tbody>
          
        </table>
      </div>
    </app-card>
